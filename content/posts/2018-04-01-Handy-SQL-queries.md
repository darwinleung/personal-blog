---
title: "Handy SQL Queries"
date: 2018-04-01T12:00:00-04:00
draft: false
tags: [ "sql" , "mysql", "database"]
categories: [ "programming", "data engineering" ]
---

This is a list of handy SQL queries I use, I will keep it updated occasionally.

# **Getting table sizes in MySQL**

This query lists the size of every table in every database in an MySQL instance, size sorted desc in MB:

```mysql
SELECT 
     table_schema as `Database`, 
     table_name AS `Table`, 
     round(((data_length + index_length) / 1024 / 1024), 2) `Size in MB` 
FROM information_schema.TABLES 
ORDER BY (data_length + index_length) DESC;	
```

ref: [SO](https://stackoverflow.com/questions/9620198/how-to-get-the-sizes-of-the-tables-of-a-mysql-database)

This query is based on `INFORMATION_SCHEMA` database, this is a place storing information about all other databases in the MySQL server. They are read-only views, they are generated by the system and automatically update as we make changes in the db. 

It contains database metadata, information such as name and size of a db or table, data type of column, access privileges etc.

ref: [mysql documentation](https://dev.mysql.com/doc/refman/5.7/en/information-schema.html)

# **Searching table by column name**

As we add more and more data in the db, sometimes it is hard to find a table with certain column. We can use a query to find out all tables with specific column names:

```mysql
SELECT DISTINCT TABLE_NAME 
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME IN ('dimension_adcontent')
        AND TABLE_SCHEMA='datareport';
```

ref: [SO](https://stackoverflow.com/questions/193780/how-to-find-all-the-tables-in-mysql-with-specific-column-names-in-them)

